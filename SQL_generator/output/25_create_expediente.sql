-- UP
CREATE TABLE EXPEDIENTE
(
  ID NUMBER(10) NOT NULL,
  NRO_EXPEDIENTE VARCHAR(29) NOT NULL,
  OBSERVACIONES VARCHAR(200) NOT NULL,
  FORMRENIEC_ID NUMBER(10) NOT NULL,
  FORMSUNARP_ID NUMBER(10) NOT NULL,
  FORMMINTRABAJO_ID NUMBER(10) NOT NULL,
  SECRETARIOJUDICIAL_ID NUMBER(10) NOT NULL,
  PRIMARY KEY (ID),
  FOREIGN KEY (FORMRENIEC_ID) REFERENCES FORMRENIEC(ID),
  FOREIGN KEY (FORMSUNARP_ID) REFERENCES FORMSUNARP(ID),
  FOREIGN KEY (FORMMINTRABAJO_ID) REFERENCES FORMMINTRABAJO(ID),
  FOREIGN KEY (SECRETARIOJUDICIAL_ID) REFERENCES SECRETARIOJUDICIAL(ID)
);

CREATE SEQUENCE EXPEDIENTE_SEQ START WITH 1;

CREATE OR REPLACE TRIGGER EXPEDIENTE_PK 
BEFORE INSERT ON EXPEDIENTE 
FOR EACH ROW

BEGIN
SELECT EXPEDIENTE_SEQ.NEXTVAL
INTO   :new.id
FROM   dual;
END;
/

-- DOWN
DROP SEQUENCE EXPEDIENTE_SEQ;
DROP TABLE EXPEDIENTE;
